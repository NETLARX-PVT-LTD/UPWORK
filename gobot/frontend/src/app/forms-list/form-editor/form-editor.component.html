<div class="editor-container">
    

    <div class="editor-content">
        <div class="left-panel" *ngIf="activeTab === 'fields'">
            <div class="form-field-container" *ngFor="let field of form.fields; let i = index">
                <div class="field-header">
                    <h3>Form Field # {{ i + 1 }}</h3>
                    <button class="settings-btn" (click)="toggleFieldSettings(i)">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z"
                                stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                                d="M12 16.5C14.4853 16.5 16.5 14.4853 16.5 12C16.5 9.51472 14.4853 7.5 12 7.5C9.51472 7.5 7.5 9.51472 7.5 12C7.5 14.4853 9.51472 16.5 12 16.5Z"
                                stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>

                <div class="form-group">
                    <label>Label <span class="required">*</span></label>
                    <input type="text" [(ngModel)]="field.label" class="form-input" placeholder="Field Label">
                </div>

                <div class="form-group">
                    <label>Prompt Phrase <span class="required">*</span></label>
                    <input type="text" [(ngModel)]="field.promptPhrase" class="form-input"
                        placeholder="How do you want to ask this question to your users?">
                </div>

                <div class="form-group">
                    <label>Input Type <span class="required">*</span></label>
                    <select [(ngModel)]="field.inputType" class="form-select">
                        <option *ngFor="let type of inputTypes" [value]="type.value">
                            {{ type.label }}
                        </option>
                    </select>
                </div>


                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" [(ngModel)]="field.required" class="checkbox">
                        <span class="checkbox-text">Required</span>
                    </label>
                </div>
                <div *ngIf="field.showSettings">
                    <div class="form-group">
                        <label>Validation Error Message (optional)</label>
                        <input type="text" [(ngModel)]="field.validationErrorMessage" class="form-input"
                            placeholder="Message to send when validation fails.">
                    </div>

                    <div class="form-group">
                        <label>Validation API link (optional)</label>
                        <input type="text" [(ngModel)]="field.validationApiLink" class="form-input"
                            placeholder="Enter webhook URL for validation.">
                    </div>
                </div>
                <button *ngIf="form.fields.length > 1" class="remove-field-btn" (click)="removeField(i)">
                    Remove Field
                </button>
            </div>

            <button class="add-field-btn" (click)="addField()">
                Add another Field
            </button>
        </div>

        <div class="left-panel">
            <div class="settings-content" *ngIf="activeTab === 'settings'">
                <!-- On Form Submit Section -->
                <div class="settings-dropdown">
                    <div class="dropdown-header" (click)="toggleSettingsSection('onFormSubmit')">
                        <span class="dropdown-title">On Form Submit</span>
                        <span class="dropdown-arrow" [class.expanded]="settingsState.onFormSubmit.expanded">
                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1L6 6L11 1" stroke="#666" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </span>
                    </div>
                    <div class="dropdown-content" [class.expanded]="settingsState.onFormSubmit.expanded">
                        <div class="radio-option">
                            <label class="radio-label">
                                <input type="radio" name="onFormSubmit" value="api"
                                    [(ngModel)]="settingsState.onFormSubmit.action">
                                <span class="radio-text">
                                    <span class="radio-dot"></span>
                                    Call API with response data
                                </span>
                            </label>
                        </div>
                        <div class="radio-option">
                            <label class="radio-label">
                                <input type="radio" name="onFormSubmit" value="email"
                                    [(ngModel)]="settingsState.onFormSubmit.action">
                                <span class="radio-text">
                                    <span class="radio-dot"></span>
                                    Email me responses
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Basic Settings Section -->
                <div class="settings-dropdown">
                    <div class="dropdown-header" (click)="toggleSettingsSection('basicSettings')">
                        <span class="dropdown-title">Basic Settings</span>
                        <span class="dropdown-arrow" [class.expanded]="settingsState.basicSettings.expanded">
                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1L6 6L11 1" stroke="#666" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </span>
                    </div>
                    <div class="dropdown-content" [class.expanded]="settingsState.basicSettings.expanded">
                        <div class="toggle-option">
                            <span class="toggle-label">Allow Multiple Submission</span>
                            <label class="toggle-switch">
                                <input type="checkbox"
                                    [(ngModel)]="settingsState.basicSettings.allowMultipleSubmissions">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="toggle-option">
                            <span class="toggle-label">Let the user exit the form?</span>
                            <label class="toggle-switch">
                                <input type="checkbox" [(ngModel)]="settingsState.basicSettings.allowUserExit">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="input-option" *ngIf="settingsState.basicSettings.allowUserExit">
                            <label class="input-label">Message To Send When User Exits Form(optional)</label>
                            <input type="text" class="settings-input"
                                [(ngModel)]="settingsState.basicSettings.exitMessage"
                                placeholder="Message To Send When User Exits Form(optional)">
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings Section -->
                <div class="settings-dropdown">
                    <div class="dropdown-header" (click)="toggleSettingsSection('advanceSettings')">
                        <span class="dropdown-title">Advance Settings</span>
                        <span class="dropdown-arrow" [class.expanded]="settingsState.advanceSettings.expanded">
                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1L6 6L11 1" stroke="#666" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </span>
                    </div>
                    <div class="dropdown-content" [class.expanded]="settingsState.advanceSettings.expanded">
                        <!-- API Response Type Selection -->
                        <div class="response-type-section" *ngIf="settingsState.onFormSubmit.action === 'api'">
                            <p class="api-info">If you have API enabled, bot will instead respond with the <span
                                    class="api-link">API response</span>.</p>
                            <div class="response-tabs">
                                <button class="response-tab"
                                    [class.active]="settingsState.advanceSettings.responseType === 'text'"
                                    (click)="setResponseType('text')">
                                    Text Message
                                </button>
                                <button class="response-tab"
                                    [class.active]="settingsState.advanceSettings.responseType === 'story'"
                                    (click)="setResponseType('story')">
                                    Story
                                </button>
                            </div>

                            <!-- Text Message Content -->
                            <div class="response-content" *ngIf="settingsState.advanceSettings.responseType === 'text'">
                                <textarea class="response-textarea"
                                    [(ngModel)]="settingsState.advanceSettings.textMessage"
                                    placeholder="Thanks for the submission">
                </textarea>
                            </div>

                            <!-- Story Selection -->
                            <div class="response-content"
                                *ngIf="settingsState.advanceSettings.responseType === 'story'">
                                <div class="story-actions">
                                    <button class="create-story-btn">+ Create Story</button>
                                </div>
                                <select class="story-select" [(ngModel)]="settingsState.advanceSettings.selectedStory">
                                    <option value="">Select a story</option>
                                    <!-- Add story options here -->
                                </select>
                            </div>
                        </div>

                        <!-- Webhook URL -->
                        <!-- <div class="input-option">
              <label class="input-label">Webhook URL</label>
              <input 
                type="text" 
                class="settings-input" 
                [(ngModel)]="settingsState.advanceSettings.webhookUrl"
                placeholder="Enter webhook URL">
            </div>

            <div class="toggle-option">
              <span class="toggle-label">Enable Analytics</span>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settingsState.advanceSettings.enableAnalytics">
                <span class="toggle-slider"></span>
              </label>
            </div> -->
                    </div>
                </div>
            </div>

        </div>

        <div class="right-panel">
            <div class="form-name-group">
                <label>Form Name</label>
                <input type="text" [(ngModel)]="form.name" class="form-name-input" placeholder="Form Name">

                <div class="tabs">
                    <button class="tab-btn" [class.active]="activeTab === 'fields'" (click)="setActiveTab('fields')">
                        <span class="tab-number">1</span>
                        Fields
                    </button>
                    <button class="tab-btn" [class.active]="activeTab === 'settings'"
                        (click)="setActiveTab('settings')">
                        <span class="tab-number">2</span>
                        Settings
                    </button>
                </div>
                <div class="button-row">
                    <button class="previous-btn" *ngIf="activeTab === 'settings'" (click)="goToPrevious()">
                        Previous
                    </button>
                    <button class="next-btn" (click)="saveForm()">
                        {{ isEditMode ? 'Update' : (activeTab === 'fields' ? 'Next' : 'Save') }}
                    </button>
                </div>
            </div>





        </div>

    </div>
</div>