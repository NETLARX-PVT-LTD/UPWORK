<ng-container *ngIf="!isSelected">
 <div class="block-header flex justify-between items-center border-b-2 border-emerald-500 rounded-t-lg"
     style="background-color: #CDA5E7; padding: 12px 16px;">
  
  <div class="block-type-badges flex gap-1.5 items-center">
    <div class="block-title flex items-center gap-2 cursor-pointer" (click)="onSelectBlock()">
      <mat-icon class="block-icon text-base w-4 h-4" style="color: #6366f1;">
        {{ block.icon }}
      </mat-icon>
      <span class="font-semibold text-sm text-slate-800">{{ block.name }}</span>
    </div>
    <span *ngIf="block.mediaId"
          class="badge media-block-badge px-2 py-1 rounded-lg text-xs font-medium tracking-wider bg-green-500 text-white">
      {{ getMediaName(block.mediaId) }}
    </span>
  </div>

  <div class="block-actions">
    <button mat-icon-button class="close-btn" (click)="onRemoveBlock()" aria-label="Remove Block">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</div>


  <div class="block-body px-4 pb-4 bg-white rounded-b-lg">
    <div class="block-description text-base text-slate-600 mb-3 leading-snug pt-1"
      *ngIf="block.description && !hasContent">
      {{ block.description }}
    </div>

    <div class="block-content-preview">
      <ng-container [ngSwitch]="block.mediaType">
        <p *ngSwitchCase="'text'" class="preview-text text-sm text-gray-700 bg-slate-50 px-3 py-2">
          {{ block.content || "No text content" }}
        </p>
        <ng-container *ngSwitchCase="'image'">
          <img [src]="block.slides[0]?.image" alt="Image Preview"
            class="preview-media-thumbnail max-w-full h-auto rounded-none pt-2"
            *ngIf="block.slides && block.slides.length > 0 && block.slides[0].image" />
          <div *ngIf="!block.slides || block.slides.length === 0 || !block.slides[0].image"
            class="no-media-content text-sm text-gray-500 italic">
            No image URL provided.
          </div>
        </ng-container>

        <ng-container *ngSwitchCase="'video'">
          <video [src]="block.mediaUrl" controls class="preview-media-thumbnail max-w-full h-auto rounded-md"
            *ngIf="block.mediaUrl"></video>
          <div *ngIf="!block.mediaUrl" class="no-media-content text-sm text-gray-500 italic">
            No video URL provided.
          </div>
        </ng-container>
<div *ngSwitchCase="'audio'" class="preview-audio-display flex items-center gap-2 text-blue-600">
            <mat-icon>volume_up</mat-icon>
            <span>{{ block.mediaUrl ? 'Audio Attached' : 'No audio' }}</span>
        </div>
        <div *ngSwitchCase="'file'" class="preview-file-display flex flex-col items-center justify-center mt-2">
            <div *ngIf="block.mediaUrl; else noFile" class="relative w-24 h-32">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png" 
                     alt="PDF Icon" 
                     class="w-full h-full object-contain">
            </div>

            <ng-template #noFile>
                <div class="no-media-content text-sm text-gray-500 italic flex items-center gap-2">
                    <mat-icon>attachment</mat-icon>
                    <span>No file</span>
                </div>
            </ng-template>
        </div>
        <ng-container *ngSwitchCase="'Image Slider'">
          <div class="image-slider-preview-card" *ngIf="block.slides && block.slides.length > 0">
            <div class="image-preview relative w-full overflow-hidden  bg-transparent py-2"
              *ngIf="block.slides[0]?.image">
              <img [src]="block.slides[0].image" alt="Slide Preview" class="w-full h-auto object-cover" />
            </div>
            <div class="text-preview text-center">
              <h4 class="font-semibold text-sm text-gray-800" *ngIf="block.slides[0]?.title">
                {{ block.slides[0].title }}
              </h4>
              <p class="text-xs text-gray-600" *ngIf="block.slides[0]?.subtitle">
                {{ block.slides[0].subtitle }}
              </p>
            </div>
          </div>
          <div *ngIf="!block.slides || block.slides.length === 0" class="no-media-content text-sm text-gray-500 italic">
            No slides added.
          </div>
        </ng-container>
        <div *ngSwitchDefault class="no-media-content text-sm text-gray-500 italic">
          No media selected or defined.
        </div>
      </ng-container>
    </div>

    <div *ngIf="block.buttons && block.buttons.length" class="button-preview-container mt-3">
      <div class="button-preview" *ngFor="let button of block.buttons">
        <button
          class="w-full bg-green-500 text-white py-1.5 px-2 mb-1 rounded-md text-xs font-semibold border border-green-500">
          {{ button.title }}
        </button>
      </div>
    </div>
  </div>
</ng-container>

<div class="connection-point connection-output absolute w-3 h-3 right-[-6px] top-1/2 -translate-y-1/2"
  (mousedown)="onStartConnection($event)" *ngIf="!isSelected">
  <div
    class="connection-dot w-full h-full rounded-full bg-indigo-500 border-2 border-white cursor-crosshair transition-all duration-200 hover:scale-130 hover:shadow-lg hover:shadow-indigo-500/20">
  </div>
</div>

<div class="connection-point connection-input absolute w-3 h-3 left-[-6px] top-1/2 -translate-y-1/2"
  *ngIf="!isSelected">
  <div
    class="connection-dot w-full h-full rounded-full bg-indigo-500 border-2 border-white cursor-crosshair transition-all duration-200 hover:scale-130 hover:shadow-lg hover:shadow-indigo-500/20">
  </div>
</div>

<div class="right-sidebar-content relative p-5 !overflow-y-auto" *ngIf="isSelected">
  <div class="flex justify-between items-center mb-4"
    *ngIf="!showNewMediaForm && !showButtonTypeCard && !showCommonIntegrationCard">
    <h4 class="text-lg font-semibold text-gray-800 section-title">
      Media Block
    </h4>
    <button mat-icon-button (click)="closeSidebar()" class="close-btn">
      <mat-icon style="font-size: 16px; width: 14px; height: 14px;">close</mat-icon>
    </button>
  </div>
  <p class="block-description mb-4 text-gray-600 text-sm leading-relaxed"
    *ngIf="!showNewMediaForm && !showButtonTypeCard && !showCommonIntegrationCard">
    Define the content that your chatbot will deliver, whether it's a text message, an image, a video, or any other
    type of media.
  </p>

  <div *ngIf="!showNewMediaForm && !showButtonTypeCard && !showCommonIntegrationCard">
    <div class="input-group mb-6">
      <h3 class="mb-3 text-gray-800 font-medium">Select Media Block</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <mat-select [(ngModel)]="block.mediaId" (selectionChange)="onMediaSelectionChange()">
          <mat-option [value]="undefined">No parent media block</mat-option>
          <mat-option *ngFor="let media of availableMedia" [value]="media.id">
            {{ media.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="or-separator text-center my-6 font-medium text-gray-600 relative">OR</div>

    <div class="action-buttons-row flex flex-row gap-3">
      <button mat-flat-button
        class="create-new-media-button w-full font-medium h-11 !rounded-lg !bg-green-500 hover:!bg-green-600 !text-white transition-colors"
        (click)="createNewMediaBlock()">
        Create New Media Block
      </button>

      <button *ngIf="block.mediaId" mat-flat-button
        class="edit-media-button w-full !rounded-lg !bg-blue-500 hover:!bg-blue-500 !text-white h-11 transition-colors"
        (click)="editExistingMediaBlock()">
        Edit Media Block
      </button>
    </div>
  </div>

  <div class="define-media-config" *ngIf="showNewMediaForm">
    <div class="flex items-center gap-3 mb-6">
      <input type="text" [(ngModel)]="block.mediaName" (ngModelChange)="onContentChange()"
        placeholder="Media Block Name"
        class="media-name-input-simple px-4 py-2 border rounded-md text-base font-medium text-gray-800 flex-grow"
        [value]="block.mediaName || 'Media Block 1546'" />
      <button mat-flat-button
        class="save-btn !bg-blue-500 hover:!bg-blue-600 !text-white h-11 px-6 !rounded-lg font-medium transition-colors"
        (click)="saveMedia()">
        Save
      </button>
      <div class="flex justify-end items-center mb-4 ">
        <button mat-icon-button (click)="closeSidebar()" class="close-btn">
          <mat-icon style="font-size: 16px; width: 14px; height: 14px;">close</mat-icon>
        </button>
      </div>
    </div>

    <mat-button-toggle-group name="mediaType" aria-label="Media Type" [(ngModel)]="block.mediaType"
  (ngModelChange)="onMediaTypeChange($event)" class="media-type-toggle w-full mb-6">
      <mat-button-toggle value="text" class="media-toggle-button">
        TEXT MESSAGE
      </mat-button-toggle>
      <mat-button-toggle value="Image Slider" class="media-toggle-button">
        IMAGE SLIDER
      </mat-button-toggle>
      <mat-button-toggle value="image" class="media-toggle-button">
        IMAGE
      </mat-button-toggle>
      <mat-button-toggle value="video" class="media-toggle-button">
        VIDEO
      </mat-button-toggle>
      <mat-button-toggle value="audio" class="media-toggle-button">
        AUDIO
      </mat-button-toggle>
      <mat-button-toggle value="file" class="media-toggle-button">
        FILE
      </mat-button-toggle>
    </mat-button-toggle-group>


    <div class="phone-frame-container flex justify-center">
      <div class="relative bg-black rounded-3xl-custom p-phone-bezel shadow-2xl-custom phone-half-frame-height">
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 bg-black rounded-b-xl-custom z-10 notch-custom">
        </div>
        <div class="bg-white rounded-screen-custom h-full flex flex-col relative overflow-hidden">
          <div class="flex justify-between items-center px-4 py-2 text-xs font-medium text-black bg-white">
            <span>9:41</span>
            <div class="flex items-center gap-1">
              <div class="w-4 h-2 bg-black rounded-sm"></div>
              <div class="w-1 h-3 bg-black rounded-sm"></div>
              <div class="w-6 h-3 border border-black rounded-sm relative">
                <div class="absolute right-0 top-0 w-4 h-full bg-black rounded-sm"></div>
              </div>
            </div>
          </div>

          <div class="flex-1 px-4 pb-8 flex flex-col justify-center bg-gray-100">
            <div class="bg-transparent rounded-2xl p-4 justify-center max-w-[85%] self-center ">
              <ng-container [ngSwitch]="block.mediaType">
                <p *ngSwitchCase="'text'" class="text-sm text-gray-700">
                  <mat-form-field appearance="outline"
                    class="full-width-input mat-input-no-bottom-gap w-full custom-input-rounded-top-right">
                    <input matInput [(ngModel)]="block.content" (ngModelChange)="onContentChange()"
                      placeholder="Type message you want to send..." class="text-sm text-gray-700" />
                    <mat-icon matSuffix class="text-gray-500">emoji_emotions</mat-icon>
                  </mat-form-field>
                </p>
                <ng-container *ngSwitchCase="'image'">
                  <div class="image-upload-container relative bg-transparent rounded-lg p-3 mb-3">
                    <div
                      class="image-display-area relative bg-gray-200 rounded-lg flex flex-col items-center justify-center h-40 mb-3 border-2 border-dashed border-gray-300 overflow-hidden w-full">
                      <div
                        class="upload-content text-center cursor-pointer p-4 w-full h-full flex items-center justify-center"
                        [class.hidden]="block.mediaUrl" (click)="openUploadModal('image')">
                        <div class="flex flex-col items-center justify-center">
                          <div class="upload-icon mb-2">
                            <div class="w-8 h-8 mx-auto bg-blue-500 rounded-full flex items-center justify-center">
                              <mat-icon class="text-white text-lg">image</mat-icon>
                            </div>
                          </div>
                          <p class="text-gray-600 text-sm font-medium mb-1">Drag your image here or click</p>
                          <p class="text-gray-600 text-sm font-medium">to upload</p>
                        </div>
                      </div>

                      <div class="image-display w-full h-full" *ngIf="block.mediaUrl">
                        <img [src]="block.mediaUrl" alt="Image Preview" class="w-full h-full object-cover rounded-lg">
                        <button
                          class="absolute top-2 right-2 w-6 h-6 rounded-lg flex items-center justify-center bg-red-500 bg-opacity-80 text-white hover:bg-opacity-100 transition-colors shadow-md z-20"
                          (click)="removeMedia()">
                          <mat-icon class="text-xs">delete</mat-icon>
                        </button>
                      </div>

                      <input type="file" #imageUploadInput accept="image/*" (change)="onImageUpload($event)"
                        class="hidden">
                    </div>
                  </div>
                </ng-container>

               <!-- Replace your existing video case in the template with this improved version -->
<ng-container *ngSwitchCase="'video'">
  <!-- Video Upload Container -->
  <div class="relative bg-transparent rounded-lg p-3 mb-3">
    
    <!-- Video Display Area -->
    <div class="relative bg-gray-900 rounded-lg overflow-hidden mb-4" style="height: 200px;">
      
      <!-- Default Video Display (placeholder) -->
      <div 
        *ngIf="!block.mediaUrl"
        class="w-80 h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900">
        
        <!-- Large Play Button -->
        <div class="w-16 h-16 bg-white bg-opacity-90 rounded-full flex items-center justify-center">
          <div class="w-0 h-0 border-l-[20px] border-l-gray-800 border-t-[12px] border-t-transparent border-b-[12px] border-b-transparent ml-1"></div>
        </div>
        
        <!-- Video Controls Bar (Default) -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3">
          <div class="flex items-center gap-3 text-white text-sm">
            <div class="w-0 h-0 border-l-[12px] border-l-white border-t-[7px] border-t-transparent border-b-[7px] border-b-transparent"></div>
            <span>0:00</span>
            <div class="flex-1 h-1 bg-white bg-opacity-30 rounded-full"></div>
            <div class="w-4 h-4 rounded-full border border-white flex items-center justify-center">
              <div class="w-2 h-2 bg-white rounded-full"></div>
            </div>
            <div class="w-4 h-4 flex items-center justify-center">
              <svg class="w-3 h-3 fill-white" viewBox="0 0 24 24">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
              </svg>
            </div>
            <div class="w-4 h-4 flex items-center justify-center">
              <svg class="w-3 h-3 fill-white" viewBox="0 0 24 24">
                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
              </svg>
            </div>
            <div class="w-4 h-4 flex items-center justify-center">
              <svg class="w-2 h-2 fill-white" viewBox="0 0 24 24">
                <circle cx="5" cy="12" r="2"/>
                <circle cx="12" cy="12" r="2"/>
                <circle cx="19" cy="12" r="2"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Video Display (when video exists) -->
      <div *ngIf="block.mediaUrl" class="relative w-full h-full">
        <video 
          [src]="block.mediaUrl" 
          controls 
          class="w-full h-full object-cover">
        </video>
        
        <!-- Delete Button -->
        <button
          class="absolute top-2 right-2 w-6 h-6 rounded-lg flex items-center justify-center bg-red-500 bg-opacity-80 text-white hover:bg-opacity-100 transition-colors shadow-md z-20"
          (click)="removeVideoMedia()">
          <mat-icon class="text-xs">delete</mat-icon>
        </button>
      </div>
    </div>

    <!-- Upload Button -->
    <button 
      class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-6 rounded-lg flex items-center justify-center gap-3 transition-colors"
      (click)="openUploadModal('video')">
      <span class="text-xl">+</span>
      <span>Upload Video</span>
    </button>

    <!-- Hidden File Input -->
    <input 
      type="file" 
      #videoUploadInput 
      accept="video/*" 
      (change)="onVideoUpload($event)"
      class="hidden">
  </div>
</ng-container>
               <ng-container *ngSwitchCase="'audio'">
    <audio controls [src]="block.mediaUrl" *ngIf="block.mediaUrl" class="w-full mb-3"></audio>

    <div *ngIf="!block.mediaUrl" class="w-full h-48 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4 p-4">
        <div class="mb-2">
            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v8"></path>
            </svg>
        </div>
        <span class="text-sm text-gray-500 italic">Please Upload Audio File</span>
        <button mat-flat-button color="primary" class="mt-4" (click)="triggerAudioUpload()">
            Upload Audio
        </button>
    </div>

    <input type="file" #audioUploadInput style="display: none;" (change)="onAudioUpload($event)" accept="audio/*">
</ng-container>
                <ng-container *ngSwitchCase="'file'">
    <a [href]="block.mediaUrl" target="_blank"
       class="flex items-center gap-2 text-blue-600 no-underline text-sm mb-3" *ngIf="block.mediaUrl">
      <mat-icon class="text-lg w-4 h-4">attachment</mat-icon>
      Download File
    </a>

    <div *ngIf="!block.mediaUrl" class="w-full h-48 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4 p-4">
        <div class="mb-2">
            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v8"></path>
            </svg>
        </div>
        <span class="text-sm text-gray-500 italic">Please Upload File</span>
        <button mat-flat-button color="primary" class="mt-4" (click)="triggerFileUpload()">
            Upload File
        </button>
    </div>

    <div *ngIf="block.mediaUrl" class="w-full h-24 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4 p-4 relative">
        <div class="flex items-center gap-2">
            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span class="text-base text-gray-700">{{ uploadedFileName || 'test-file.pdf' }}</span>
        </div>
        <button mat-icon-button (click)="removeFile()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-900">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <input type="file" #fileUploadInput style="display: none;" (change)="onFileUpload($event)">
</ng-container>
                <!-- Replace the Image Slider case in your template with this code -->
                <ng-container *ngSwitchCase="'Image Slider'">
                  <div class="absolute top-16 right-30 flex space-x-2 z-10">
                    <button *ngIf="block.slides && block.slides.length > 1"
                      class="remove-slide-btn-overlay w-6 h-6 rounded-lg flex items-center justify-center bg-red-500 text-white hover:bg-red-600 transition-colors shadow-md"
                      (click)="removeCurrentSlide()">
                      <mat-icon class="text-xs">close</mat-icon>
                    </button>



                  </div>
                  <div class="image-slider-container relative bg-transparent rounded-lg p-3 mb-3">
                    <div class="whole-slider-component" *ngIf="block.slides && block.slides.length > 0">

                      <div class="current-slide-content" [@slideAnimation]="currentSlideIndex">

                        <div class="relative flex items-center">
                          <!-- Left Navigation Button -->
                          <button
                            class="nav-button-overlay absolute left-[-40px] top-1/2 transform -translate-y-1/2 w-6 h-6 rounded-lg flex items-center justify-center bg-blue-500 bg-opacity-70 text-white hover:bg-opacity-90 transition-colors shadow-md z-10"
                            (click)="previousSlide()" [disabled]="currentSlideIndex === 0">
                            <mat-icon class="text-sm">chevron_left</mat-icon>
                          </button>

                          <div
                            class="image-display-area relative bg-gray-200 rounded-lg flex flex-col items-center justify-center h-40 mb-3 border-2 border-dashed border-gray-300 overflow-hidden w-full">

                            <div
                              class="upload-content text-center cursor-pointer p-4 w-full h-full flex items-center justify-center"
                              [class.hidden]="block.slides[currentSlideIndex].image" (click)="openUploadModal('image')">
                              <div class="flex flex-col items-center justify-center">
                                <div class="upload-icon mb-2">
                                  <div
                                    class="w-8 h-8 mx-auto bg-blue-500 rounded-full flex items-center justify-center">
                                    <mat-icon class="text-white text-lg">image</mat-icon>
                                  </div>
                                </div>
                                <p class="text-gray-600 text-sm font-medium mb-1">Drag your image here or click</p>
                                <p class="text-gray-600 text-sm font-medium">to upload</p>
                              </div>
                            </div>

                            <div class="image-slider-display w-full h-full"
                              *ngIf="block.slides[currentSlideIndex].image">
                              <img [src]="block.slides[currentSlideIndex].image" alt="Slide Image"
                                class="w-full h-full object-cover rounded-lg">

                              <button
                                class="absolute top-2 right-2 w-6 h-6 rounded-lg flex items-center justify-center bg-red-500 bg-opacity-80 text-white hover:bg-opacity-100 transition-colors shadow-md z-20"
                                (click)="removeCurrentImage(currentSlideIndex)">
                                <mat-icon class="text-xs">delete</mat-icon>
                              </button>
                            </div>

                            <input type="file" #imageUploadInput accept="image/*" (change)="onImageUpload($event)"
                              class="hidden">
                          </div>

                          <!-- Right Navigation Button -->
                          <button
                            class="nav-button-overlay absolute right-[-40px] top-1/2 transform -translate-y-1/2 w-6 h-6 rounded-lg flex items-center justify-center bg-blue-500 bg-opacity-70 text-white hover:bg-opacity-90 transition-colors shadow-md z-10"
                            [disabled]="currentSlideIndex === (block.slides.length - 1)" (click)="nextSlide()"
                            *ngIf="currentSlideIndex < (block.slides.length - 1); else addSlideButton">
                            <mat-icon class="text-sm">chevron_right</mat-icon>
                          </button>

                          <ng-template #addSlideButton>
                            <button
                              class="nav-button-overlay absolute right-[-40px] top-1/2 transform -translate-y-1/2 w-6 h-6 rounded-lg flex items-center justify-center bg-blue-500 bg-opacity-70 text-white hover:bg-opacity-90 transition-colors shadow-md z-10"
                              (click)="addNewSlide()">
                              <mat-icon class="text-sm">add</mat-icon>
                            </button>
                          </ng-template>
                        </div>


                        <div class="slide-input-group mb-3">
                          <input type="text" placeholder="Slide Title"
                            class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            [(ngModel)]="block.slides[currentSlideIndex].title" (ngModelChange)="onContentChange()" />
                        </div>

                        <div class="slide-input-group mb-3">
                          <input type="text" placeholder="Subtitle"
                            class="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            [(ngModel)]="block.slides[currentSlideIndex].subtitle"
                            (ngModelChange)="onContentChange()" />
                        </div>
                      </div>

                      <div class="slide-indicators flex justify-center gap-1 mt-4">
                        <div class="indicator w-2 h-2 rounded-full bg-gray-400 cursor-pointer transition-colors"
                          *ngFor="let slide of block.slides; let i = index"
                          [class.bg-blue-500]="i === currentSlideIndex" (click)="goToSlide(i)">
                        </div>
                      </div>
                    </div>

                    <div class="image-slider-container bg-white rounded-lg p-3 mb-3"
                      *ngIf="!block.slides || block.slides.length === 0">
                      <div class="upload-content text-center cursor-pointer" (click)="addNewSlide()">
                        <p class="text-gray-600 text-sm font-medium mb-1">Click to add your first slide</p>
                      </div>
                    </div>
                  </div>
                </ng-container>

                <div *ngIf="showUploadModal" class="fixed inset-0 z-50 flex items-center justify-end top-1 right-26  bg-opacity-50">
  <div class="relative bg-white w-full max-w-md rounded-lg border border-gray-200 shadow-lg">
    <div class="flex justify-between items-center p-4 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-800">
        {{ activeMediaType === 'image' ? 'Upload Image' : 'Upload Video' }}
      </h3>
      <button mat-icon-button (click)="closeUploadModal()" class="text-gray-500 hover:text-gray-700">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <mat-tab-group>
      <mat-tab label="Upload" class="!bg-green-500 text-white">
        <div class="py-2">
          <!-- <p class="text-gray-600 mb-2">
            Upload a {{ activeMediaType }} from your computer.
          </p> -->
          <div class="flex gap-2 mb-4 items-center justify-between  p-4 rounded-lg">
             <button class="w-full py-2 text-sm text-gray-600 border border-gray-300 rounded"
>{{ uploadedFileName || 'Choose file' }}</button>

            <ng-container *ngIf="activeMediaType === 'image'">
              <input #imageUploadInput type="file" accept="image/*" class="hidden" (change)="onImageUpload($event)">
              <button mat-flat-button class="!bg-green-500 !rounded-lg" (click)="imageUploadInput.click()">Browse</button>
            </ng-container>

            <ng-container *ngIf="activeMediaType === 'video'">
              <input #videoUploadInput type="file" accept="video/*" class="hidden" (change)="onVideoUpload($event)">
              <button mat-flat-button class="!bg-green-500 !rounded-lg" (click)="videoUploadInput.click()">Browse</button>
            </ng-container>

          </div>
        </div>
      </mat-tab>

      <mat-tab label="URL">
        <div class="py-4 p-2">
          <h3 class="block text-gray-700 text-sm font-medium mb-1">{{ activeMediaType === 'image' ? 'Image URL' : 'Video URL' }}</h3>
          <mat-form-field appearance="outline" class="w-full !py-2">
            <!-- <mat-label>{{ activeMediaType === 'image' ? 'Image URL' : 'Video URL' }}</mat-label> -->

            <input matInput
              [placeholder]="activeMediaType === 'image' ? 'https://example.com/image.jpg' : 'https://example.com/video.mp4'"
              [ngModel]="activeMediaType === 'image' ? imageUrlInput : videoUrlInput"
              (ngModelChange)="activeMediaType === 'image' ? imageUrlInput = $event : videoUrlInput = $event">
          </mat-form-field>
          <div class="flex justify-end mt-2">
            <button mat-flat-button class="!bg-green-500 !rounded-lg"
              (click)="activeMediaType === 'image' ? uploadImageUrl() : uploadVideoUrl()">
              Upload 
            </button>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

                <!-- end of image slider  -->
                <p *ngSwitchDefault class="text-sm text-gray-500 mb-3">Select a media type above.
                </p>
              </ng-container>
            </div>

            <ng-container *ngIf="block.buttons && block.buttons.length">
              <div *ngFor="let button of block.buttons; let i = index" class="mb-4  flex justify-center">
                <button
                  class="bg-transparent text-blue-500 py-1 px-2 w-50 rounded-lg text-xs font-semibold flex items-center justify-between border border-blue-500 hover:bg-gray-100 transition-colors">
                  <mat-icon class="text-sm" (click)="onEditButtonClick(button, i)">edit</mat-icon>
                  <span class="justify-between px-6">{{ button.title }}</span>
                  <mat-icon class="text-sm" style="color: rgb(237, 50, 50);"
                    (click)="onDeleteButtonClick(i)">delete</mat-icon>
                </button>
              </div>
            </ng-container>

            <div class="mb-4 flex justify-center">
              <button
                class="bg-transparent text-blue-500 px-10 py-1 rounded-none text-xs font-semibold text-xs flex items-center gap-2 hover:bg-blue-200 transition-colors border-2 border-dashed border-blue-300"
                (click)="onAddNewButton()">
                <span class="text-base font-bold">+</span>
                ADD NEW BUTTON
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="button-type-card-container absolute z-50" *ngIf="showButtonTypeCard"
      style="top: 90px; right: calc(50% - 160px); transform: translateX(-50%);">
      <div class="button-type-card bg-gray-50 p-6 rounded-lg shadow-xl w-80 max-w-full relative">
        <div class="flex justify-between bg-gray-100 items-center mb-4">
          <h4 class="text-lg font-semibold text-gray-800">Button Type</h4>
          <button mat-icon-button (click)="closeButtonTypeCard()" class="close-btn">
            <mat-icon style="font-size: 16px; width: 14px; height: 14px;">close</mat-icon>
          </button>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('text_message')">Text Message</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('media_block')">Send Media Block</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('website_url')">Website URL</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('direct_call')">Direct Call</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('start_story')">Start Story</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('rss_feed')">RSS Feed</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('json_api')">JSON API</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('human_help')">Human Help</button>
          <button mat-flat-button class="button-option !text-xs py-2 !rounded-lg !bg-blue-500 hover:bg-gray-200"
            (click)="openCommonCardForNewButton('conversational_form')">Conversational Form</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="common-integration-card border border-gray-200 absolute z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-110 p-4 bg-white rounded-lg shadow-xl"
  *ngIf="showCommonIntegrationCard">
  <div class="flex justify-between items-center mb-4">
    <h4 class="text-lg font-medium uppercase text-gray-500">
      <ng-container [ngSwitch]="currentButton.type">
        <span *ngSwitchCase="'text_message'">Text Message Integration</span>
        <span *ngSwitchCase="'media_block'">Media Block Integration</span>
        <span *ngSwitchCase="'website_url'">Website URL Integration</span>
        <span *ngSwitchCase="'direct_call'">Direct Call Integration</span>
        <span *ngSwitchCase="'start_story'">Story Integration</span>
        <span *ngSwitchCase="'rss_feed'">RSS Integration</span>
        <span *ngSwitchCase="'json_api'">JSON Integration</span>
        <span *ngSwitchCase="'human_help'">Human Help Integration</span>
        <span *ngSwitchCase="'conversational_form'">Conversational Form Integration</span>
        <span *ngSwitchDefault>Button Integration</span>
      </ng-container>
    </h4>
    <button mat-icon-button (click)="closeCommonIntegrationCard()" class="close-btn">
      <mat-icon style="font-size: 16px; width: 14px; height: 14px;">close</mat-icon>
    </button>
  </div>

  <div class="input-group mb-4">
    <h3 class="text-sm mb-1 font-semibold text-gray-600">Title of the button *</h3>
    <mat-form-field appearance="outline" class="full-width-input w-full">
      <textarea matInput placeholder="e.g. Show another product" [(ngModel)]="currentButton.title" maxlength="20"
        cdkTextareaAutosize #buttonTitleAutosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="2"
        class="full-width-input resize-none"></textarea>
      <mat-hint align="end">{{ currentButton.title ? currentButton.title.length : 0 }} / 20</mat-hint>
    </mat-form-field>
  </div>

  <ng-container [ngSwitch]="currentButton.type">
    <div *ngSwitchCase="'text_message'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Bot says *</h3>
      <div class="relative">
        <mat-form-field appearance="outline" class="full-width-input w-full">
          <textarea matInput placeholder="Welcome, I am Leo, I can help you discover cheapest concert tickets" rows="2"
            [(ngModel)]="currentButton.textMessage" maxlength="320" cdkTextareaAutosize
            #buttonTextMessageAutosize="cdkTextareaAutosize" cdkAutosizeMinRows="2" cdkAutosizeMaxRows="8"
            class="full-width-input max-h-20 overflow-y-auto resize-none"></textarea>
          <mat-hint align="end">{{ currentButton.textMessage ? currentButton.textMessage.length : 0 }} / 320</mat-hint>
          <mat-icon matSuffix class="info-icon" (click)="openInfoModal('buttonTextMessage')">info</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <div *ngSwitchCase="'media_block'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Select Media Block *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <mat-select [(ngModel)]="currentButton.linkedMediaId" name="selectedMediaBlock">
          <mat-option [value]="undefined">No media block selected</mat-option>
          <mat-option *ngFor="let media of availableMedia" [value]="media.id">
            {{ media.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'website_url'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Weblink on button click *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput placeholder="e.g. https://www.example.com" [(ngModel)]="currentButton.url">
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'direct_call'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Phone number *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput placeholder="e.g. +15105551234" [(ngModel)]="currentButton.phoneNumber">
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'start_story'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Select story to initiate *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <mat-select [(ngModel)]="currentButton.storyId" name="selectedStory">
          <mat-option [value]="undefined">No story selected</mat-option>
          <mat-option *ngFor="let story of availableStories" [value]="story.id">
            {{ story.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'rss_feed'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">RSS Feed URL *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput placeholder="Your RSS feed URL" [(ngModel)]="currentButton.rssUrl" name="rssUrl">
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'rss_feed'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Number of items to show *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput type="number" placeholder="e.g. 5" [(ngModel)]="currentButton.rssItemCount" name="rssItemCount">
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'rss_feed'" class="input-group mb-4">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">Button Text *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput placeholder="e.g. View Now!" [(ngModel)]="currentButton.rssButtonText" name="rssButtonText">
      </mat-form-field>
    </div>

    <div *ngSwitchCase="'json_api'">
      <h3 class="text-sm mb-1 font-semibold text-gray-600">API Endpoint *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <input matInput type="url" [(ngModel)]="currentButton.apiEndpoint" placeholder="Enter Your API Endpoint" />
      </mat-form-field>
      <p class="p-1 -mt-4 text-gray-400 text-xs">
        We send all the user data and current conversation variables to the POST request automatically,
        <a class="text-blue-500 font-semibold"
          href="https://botify.zendesk.com/hc/en-us/articles/36771596020193-JSON-API-Response-Format"
          target="_blank">Check out the JSON format</a>
      </p>

      <h3 class="text-sm mb-1 font-semibold text-gray-600">Select Request Type *</h3>
      <mat-form-field appearance="outline" class="full-width-input w-full">
        <mat-select [(ngModel)]="currentButton.requestType" placeholder="Select Request Type">
          <mat-option value="POST">POST</mat-option>
          <mat-option value="GET">GET</mat-option>
          <mat-option value="PUT">PUT</mat-option>
          <mat-option value="DELETE">DELETE</mat-option>
          <mat-option value="PATCH">PATCH</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="headers-section">
        <div class="section-header mb-2">
          <h4 class="font-semibold text-sm text-gray-600">Select Headers</h4>
        </div>

        <div class="header-item flex items-center gap-2 mb-2"
          *ngFor="let header of currentButton.apiHeaders; let i = index">
          <mat-form-field appearance="outline" class="header-key-input">
            <input matInput [(ngModel)]="header.key" placeholder="Header Key" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="header-value-input">
            <input matInput [(ngModel)]="header.value" placeholder="Header Value" />
          </mat-form-field>

          <button mat-icon-button class="mat-icon-button" color="warn" (click)="removeApiHeader(i)"
            matTooltip="Remove Header">
            <mat-icon>delete</mat-icon>
          </button>
        </div>

        <button mat-flat-button class="add-header-button w-full !bg-blue-500" (click)="addApiHeader()">
          <mat-icon>add</mat-icon>
          Add
        </button>
      </div>
    </div>

    <div *ngSwitchCase="'human_help'">
      <div class="input-group mb-4">
        <h3 class="text-sm mb-1 font-semibold text-gray-600">Message After Help Action *</h3>
        <mat-form-field appearance="outline" class="full-width-input w-full">
          <input matInput placeholder="Bot Says" [(ngModel)]="currentButton.messageAfterAction"
            name="messageAfterAction">
        </mat-form-field>
      </div>

      <div class="input-group mb-4">
        <h3 class="text-sm mb-1 font-semibold text-gray-600">Email for Notification</h3>
        <mat-form-field appearance="outline" class="full-width-input w-full">
          <input matInput placeholder="Enter Email" [(ngModel)]="currentButton.emailForNotification"
            name="emailForNotification">
        </mat-form-field>
        <p class="note-text text-xs text-gray-500">Note: Send notifications to multiple emails, press enter to add
          email.</p>
      </div>

      <div class="flex items-center justify-start mt-4">
        <mat-slide-toggle [(ngModel)]="currentButton.stopBotForUser" name="stopBotForUser"
          class="mr-2"></mat-slide-toggle>
        <span>Stop Bot For User</span>
      </div>
    </div>

    <div *ngSwitchCase="'conversational_form'">
      <div class="input-group mb-4">
        <h3 class="text-sm mb-1 font-semibold text-gray-600">Select Form *</h3>
        <mat-form-field appearance="outline" class="full-width-input w-full">
          <mat-select [(ngModel)]="currentButton.formId" name="formId">
            <mat-option value="form1">Default Form 9405</mat-option>
            <mat-option value="form2">Another Form</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="flex items-center justify-start mt-4">
        <mat-slide-toggle [(ngModel)]="currentButton.showInline" (ngModelChange)="onContentChange()">
        </mat-slide-toggle>
        <span>Show as inline form</span>
        <mat-icon matTooltip="Display the form directly in the chat window."
          class="info-icon !font-2 ml-1">info</mat-icon>
      </div>
    </div>
  </ng-container>

  <div class="flex justify-start mt-6">
    <button mat-flat-button
      class="save-common-button !bg-blue-500 !text-white h-8 px-2 !rounded-lg font-medium transition-colors"
      [class.hover:!bg-blue-600]="currentButton.title && (currentButton.type === 'text_message' ? currentButton.textMessage : (currentButton.type === 'media_block' ? currentButton.linkedMediaId : (currentButton.type === 'website_url' ? currentButton.url : false)))"
      [class.opacity-50]="!currentButton.title || (currentButton.type === 'text_message' && !currentButton.textMessage) || (currentButton.type === 'media_block' && !currentButton.linkedMediaId) || (currentButton.type === 'website_url' && !currentButton.url)"
      [class.cursor-not-allowed]="!currentButton.title || (currentButton.type === 'text_message' && !currentButton.textMessage) || (currentButton.type === 'media_block' && !currentButton.linkedMediaId) || (currentButton.type === 'website_url' && !currentButton.url)"
      (click)="saveCommonIntegrationCard()"
      [disabled]="!currentButton.title || (currentButton.type === 'text_message' && !currentButton.textMessage) || (currentButton.type === 'media_block' && !currentButton.linkedMediaId) || (currentButton.type === 'website_url' && !currentButton.url)">
      {{ currentButtonIndex === -1 ? 'Add' : 'Update' }}
    </button>
  </div>
</div>

<div class="info-modal-container fixed z-[60] top-0 left-0 w-full h-full flex items-center justify-center"
  (click)="closeInfoModal()" *ngIf="showInfoModal">
  <div class="info-modal-card bg-white border-gray-200 border p-4 rounded-lg shadow-xl w-80 max-w-full absolute"
    style="left: calc(100% - 550px); top: 400px;" (click)="$event.stopPropagation()">
    <div class="search-box">
      <mat-form-field appearance="outline" class="w-full text-sm">
        <input matInput placeholder="search variable..." type="text" [(ngModel)]="searchTerm"
          (ngModelChange)="filterVariables()" class="!h-6">
        <mat-icon matPrefix class="text-base">search</mat-icon>
      </mat-form-field>
    </div>
    <div class="variable-lists max-h-32 overflow-hidden overflow-y-auto">
      <div class="variable-list-group mb-2" *ngIf="filteredGeneralAttributes.length > 0">
        <h5 class="text-xs font-medium text-gray-700 mb-1">General Attributes</h5>
        <div class="grid grid-cols-2 gap-2">
          <button mat-flat-button
            class="variable-button !justify-start !text-xs !text-blue-500 py-1 !rounded-lg !bg-blue-100 !border !border-blue-300 hover:bg-gray-300"
            *ngFor="let attr of filteredGeneralAttributes" (click)="selectVariable(attr)">
            {{ attr }}
          </button>
        </div>
      </div>
      <div class="variable-list-group mb-2" *ngIf="filteredFormAttributes.length > 0">
        <h5 class="text-xs font-medium text-gray-700 mb-1">Form Attributes</h5>
        <div class="grid w-fit gap-2">
          <button mat-flat-button
            class="variable-button !justify-start !text-xs !text-blue-500 py-1 !rounded-lg !bg-blue-100 !border !border-blue-300 hover:bg-gray-300"
            *ngFor="let attr of filteredFormAttributes" (click)="selectVariable(attr)">
            {{ attr }}
          </button>
        </div>
      </div>
      <div class="variable-list-group" *ngIf="filteredUserAttributes.length > 0">
        <h5 class="text-xs font-medium text-gray-700 mb-1">User Attributes</h5>
        <div class="grid grid-cols-2 gap-2">
          <button mat-flat-button
            class="variable-button !justify-start !text-xs !text-blue-500 py-1 !rounded-lg !bg-blue-100 !border !border-blue-300 hover:bg-gray-300"
            *ngFor="let attr of filteredUserAttributes" (click)="selectVariable(attr)">
            {{ attr }}
          </button>
        </div>
      </div>
      <div
        *ngIf="filteredGeneralAttributes.length === 0 && filteredFormAttributes.length === 0 && filteredUserAttributes.length === 0">
        <p class="text-center text-xs text-gray-500 italic">No variables found.</p>
      </div>
    </div>
  </div>
</div>
<!-- video upload modal -->

<!-- <div *ngIf="showUploadModal" class="fixed inset-0 z-50 flex items-center justify-end top-1 right-26  bg-opacity-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold">
        {{ activeMediaType === 'image' ? 'Upload Image' : 'Upload Video' }}
      </h2>
      <button mat-icon-button (click)="closeUploadModal()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <mat-tab-group>
      <mat-tab label="Upload">
        <div class="py-4">
          <p class="text-gray-600 mb-2">
            Upload a {{ activeMediaType }} from your computer.
          </p>
          <div class="flex items-center justify-between border-2 border-dashed border-gray-300 p-4 rounded-lg">
            <span class="text-gray-500 truncate">{{ uploadedFileName || 'Choose file' }}</span>

            <ng-container *ngIf="activeMediaType === 'image'">
              <input #imageUploadInput type="file" accept="image/*" class="hidden" (change)="onImageUpload($event)">
              <button mat-flat-button color="primary" (click)="imageUploadInput.click()">Browse</button>
            </ng-container>

            <ng-container *ngIf="activeMediaType === 'video'">
              <input #videoUploadInput type="file" accept="video/*" class="hidden" (change)="onVideoUpload($event)">
              <button mat-flat-button color="primary" (click)="videoUploadInput.click()">Browse</button>
            </ng-container>

          </div>
        </div>
      </mat-tab>

      <mat-tab label="URL">
        <div class="py-4">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{ activeMediaType === 'image' ? 'Image URL' : 'Video URL' }}</mat-label>

            <input matInput
              [placeholder]="activeMediaType === 'image' ? 'https://example.com/image.jpg' : 'https://example.com/video.mp4'"
              [ngModel]="activeMediaType === 'image' ? imageUrlInput : videoUrlInput"
              (ngModelChange)="activeMediaType === 'image' ? imageUrlInput = $event : videoUrlInput = $event">
          </mat-form-field>
          <div class="flex justify-end mt-2">
            <button mat-flat-button color="primary"
              (click)="activeMediaType === 'image' ? uploadImageUrl() : uploadVideoUrl()">
              Upload {{ activeMediaType }}
            </button>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<button mat-button class="bg-gray-200 text-gray-800 w-[80%] mb-2 font-medium" (click)="openUploadModal('video')">
  <mat-icon>upload</mat-icon>
  Upload Video
</button>

<button mat-button class="bg-gray-200 text-gray-800 w-[80%] mb-2 font-medium" (click)="openUploadModal('image')">
  <mat-icon>upload</mat-icon>
  Upload Image
</button> -->